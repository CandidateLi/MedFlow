<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>é¢˜åº“ç´¢å¼•ç”Ÿæˆå™¨</title>
<style>
    body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; background: #f4f6f9; }
    .box { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    input { width: 100%; padding: 8px; margin: 5px 0 15px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box;}
    button { background: #4a90e2; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 16px;}
    button:hover { background: #357abd; }
    textarea { width: 100%; height: 200px; margin-top: 20px; border: 1px solid #ddd; padding: 10px; font-family: monospace; }
    .item { background: #eef; padding: 10px; margin-bottom: 5px; border-radius: 4px; font-size: 0.9em; display: flex; justify-content: space-between; }
</style>
</head>
<body>

<div class="box">
    <h2>ğŸ›  é¢˜åº“èœå•ç”Ÿæˆå™¨</h2>
    
    <label>1. è¯•å·æ ‡é¢˜ (æ˜¾ç¤ºçš„åå­—)</label>
    <input type="text" id="title" placeholder="ä¾‹å¦‚ï¼šå†…ç§‘å­¦ - å‘¼å¸ç³»ç»Ÿ">

    <label>2. ç®€å•æè¿° (å‰¯æ ‡é¢˜)</label>
    <input type="text" id="desc" placeholder="ä¾‹å¦‚ï¼šåŒ…å«è‚ºç‚ã€å“®å–˜ç­‰é‡ç‚¹é¢˜">

    <label>3. æ–‡ä»¶å (å¿…é¡»å’Œdataæ–‡ä»¶å¤¹é‡Œçš„åå­—ä¸€æ¨¡ä¸€æ ·)</label>
    <input type="text" id="file" placeholder="ä¾‹å¦‚ï¼šhuxi.json">

    <button onclick="addItem()">â¬‡ï¸ æ·»åŠ åˆ°åˆ—è¡¨</button>

    <div id="preview-list" style="margin-top:20px;"></div>

    <hr>
    <h3>ç”Ÿæˆç»“æœ (repo_index.json çš„å†…å®¹)</h3>
    <textarea id="result">[]</textarea>
    <button style="background:#27ae60; width:100%;" onclick="copyResult()">ğŸ“‹ å¤åˆ¶ç»“æœ</button>
</div>

<script>
    let list = [];

    function addItem() {
        const title = document.getElementById('title').value.trim();
        const desc = document.getElementById('desc').value.trim();
        let file = document.getElementById('file').value.trim();

        if(!title || !file) { alert('æ ‡é¢˜å’Œæ–‡ä»¶åå¿…å¡«ï¼'); return; }

        // è‡ªåŠ¨è¡¥å…¨è·¯å¾„ï¼Œå¦‚æœç”¨æˆ·æ²¡å†™ data/
        if(!file.startsWith('data/')) {
            file = 'data/' + file;
        }

        list.push({ title, desc, file });
        render();
        
        // æ¸…ç©ºè¾“å…¥æ¡†
        document.getElementById('title').value = '';
        document.getElementById('desc').value = '';
        document.getElementById('file').value = '';
    }

    function render() {
        // æ›´æ–°é¢„è§ˆåˆ—è¡¨
        const previewEl = document.getElementById('preview-list');
        previewEl.innerHTML = list.map((item, index) => 
            `<div class="item"><span>${index+1}. ${item.title}</span> <span style="color:#666">(${item.file})</span></div>`
        ).join('');

        // ç”Ÿæˆ JSON ä»£ç 
        const jsonStr = JSON.stringify(list, null, 2);
        document.getElementById('result').value = jsonStr;
    }

    function copyResult() {
        const text = document.getElementById('result');
        text.select();
        document.execCommand('copy');
        alert('å·²å¤åˆ¶ï¼å¿«å»ç²˜è´´åˆ° repo_index.json æ–‡ä»¶é‡Œå§ã€‚');
    }
</script>
</body>
</html>